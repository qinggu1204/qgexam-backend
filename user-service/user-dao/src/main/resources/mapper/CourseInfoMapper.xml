<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qgexam.user.dao.CourseInfoDao">

    <resultMap id="getCourseListByTeacher" type="com.qgexam.user.pojo.PO.CourseInfo">
        <id column="course_id" property="courseId"/>
        <result column="course_name" property="courseName"/>
        <result column="course_url" property="courseUrl"/>
        <result column="subject_id" property="subjectId"/>
        <result column="subject_name" property="subjectName"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="is_deleted" property="isDeleted"/>
        <result column="year" property="year"/>
        <result column="semester" property="semester"/>
        <collection property="teacherList" ofType="com.qgexam.user.pojo.PO.TeacherInfo">
            <id column="teacher_id" property="teacherId"/>
            <result column="user_name" property="userName"/>
        </collection>
    </resultMap>
    <select id="getCourseListByTeacher" resultMap="getCourseListByTeacher">
        select ci.course_id,
               ci.course_name,
               ci.course_url,
               ci.subject_id,
               ci.subject_name,
               ci.create_time,
               ci.update_time,
               ci.is_deleted,
               ci.year,
               ci.semester,
               tc.teacher_id,
               tc.user_name
        from course_info ci, teacher_course tc
        where ci.subject_id=#{subjectId}
          and ci.year =#{year}
          and ci.semester=#{semester}
          and tc.teacher_id=#{teacherId}
          and ci.course_id=tc.course_id
    </select>
</mapper>